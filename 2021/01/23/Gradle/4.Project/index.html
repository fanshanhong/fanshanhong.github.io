<!DOCTYPE html><html data-theme="light"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Project | Fan Blog</title><meta name="description" content="​"><meta name="keywords" content="Project"><meta name="author" content="Fan shanhong"><meta name="copyright" content="Fan shanhong"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Project"><meta name="twitter:description" content="​"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="Project"><meta property="og:url" content="http://yoursite.com/2021/01/23/Gradle/4.Project/"><meta property="og:site_name" content="Fan Blog"><meta property="og:description" content="​"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2021/01/23/Gradle/4.Project/"><link rel="prev" title="Gradle入门" href="http://yoursite.com/2021/01/23/Gradle/1.Gradle入门/"><link rel="next" title="Task" href="http://yoursite.com/2021/01/23/Gradle/3.Task/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Fan Blog</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">142</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">32</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">29</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Settings文件"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Settings文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Build文件"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">Build文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#buildscript-和-allprojects"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">buildscript 和 allprojects</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#自定义属性"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">自定义属性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Task-与-Project"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">Task 与 Project</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#访问任务的方式"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">访问任务的方式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Project类图"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">Project类图</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#getter-setter属性"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">getter/setter属性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#文件操作"><span class="toc_mobile_items-number">9.</span> <span class="toc_mobile_items-text">文件操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#通过mkdir创建目录"><span class="toc_mobile_items-number">9.1.</span> <span class="toc_mobile_items-text">通过mkdir创建目录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#通过file、files-定位文件"><span class="toc_mobile_items-number">9.2.</span> <span class="toc_mobile_items-text">通过file、files 定位文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#通过fileTree创建文件树"><span class="toc_mobile_items-number">9.3.</span> <span class="toc_mobile_items-text">通过fileTree创建文件树</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#复制文件"><span class="toc_mobile_items-number">9.4.</span> <span class="toc_mobile_items-text">复制文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#删除文件"><span class="toc_mobile_items-number">9.5.</span> <span class="toc_mobile_items-text">删除文件</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#多项目构建"><span class="toc_mobile_items-number">10.</span> <span class="toc_mobile_items-text">多项目构建</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#通过-settings-gradle-引入子项目"><span class="toc_mobile_items-number">10.1.</span> <span class="toc_mobile_items-text">通过 settings.gradle 引入子项目</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#项目配置"><span class="toc_mobile_items-number">10.2.</span> <span class="toc_mobile_items-text">项目配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#构建脚本配置"><span class="toc_mobile_items-number">10.3.</span> <span class="toc_mobile_items-text">构建脚本配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#属性"><span class="toc_mobile_items-number">10.4.</span> <span class="toc_mobile_items-text">属性</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Settings文件"><span class="toc-number">1.</span> <span class="toc-text">Settings文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Build文件"><span class="toc-number">2.</span> <span class="toc-text">Build文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#buildscript-和-allprojects"><span class="toc-number">3.</span> <span class="toc-text">buildscript 和 allprojects</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#自定义属性"><span class="toc-number">4.</span> <span class="toc-text">自定义属性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Task-与-Project"><span class="toc-number">5.</span> <span class="toc-text">Task 与 Project</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#访问任务的方式"><span class="toc-number">6.</span> <span class="toc-text">访问任务的方式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Project类图"><span class="toc-number">7.</span> <span class="toc-text">Project类图</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getter-setter属性"><span class="toc-number">8.</span> <span class="toc-text">getter/setter属性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#文件操作"><span class="toc-number">9.</span> <span class="toc-text">文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#通过mkdir创建目录"><span class="toc-number">9.1.</span> <span class="toc-text">通过mkdir创建目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过file、files-定位文件"><span class="toc-number">9.2.</span> <span class="toc-text">通过file、files 定位文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过fileTree创建文件树"><span class="toc-number">9.3.</span> <span class="toc-text">通过fileTree创建文件树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#复制文件"><span class="toc-number">9.4.</span> <span class="toc-text">复制文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除文件"><span class="toc-number">9.5.</span> <span class="toc-text">删除文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#多项目构建"><span class="toc-number">10.</span> <span class="toc-text">多项目构建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#通过-settings-gradle-引入子项目"><span class="toc-number">10.1.</span> <span class="toc-text">通过 settings.gradle 引入子项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目配置"><span class="toc-number">10.2.</span> <span class="toc-text">项目配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构建脚本配置"><span class="toc-number">10.3.</span> <span class="toc-text">构建脚本配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#属性"><span class="toc-number">10.4.</span> <span class="toc-text">属性</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Project</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2021-01-23<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2021-01-28</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Project/">Project</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><!-- TOC -->
<ul>
<li><a href="#settings文件">Settings文件</a></li>
<li><a href="#build文件">Build文件</a></li>
<li><a href="#buildscript-和-allprojects">buildscript 和 allprojects</a></li>
<li><a href="#自定义属性">自定义属性</a></li>
<li><a href="#task-与-project">Task 与 Project</a></li>
<li><a href="#访问任务的方式">访问任务的方式</a></li>
<li><a href="#project类图">Project类图</a></li>
<li><a href="#gettersetter属性">getter/setter属性</a></li>
<li><a href="#文件操作">文件操作</a><ul>
<li><a href="#通过mkdir创建目录">通过mkdir创建目录</a></li>
<li><a href="#通过filefiles-定位文件">通过file、files 定位文件</a></li>
<li><a href="#通过filetree创建文件树">通过fileTree创建文件树</a></li>
<li><a href="#复制文件">复制文件</a></li>
<li><a href="#删除文件">删除文件</a></li>
</ul>
</li>
<li><a href="#多项目构建">多项目构建</a><ul>
<li><a href="#通过-settingsgradle-引入子项目">通过 settings.gradle 引入子项目</a></li>
<li><a href="#项目配置">项目配置</a></li>
<li><a href="#构建脚本配置">构建脚本配置</a></li>
<li><a href="#属性">属性</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h1 id="Settings文件"><a href="#Settings文件" class="headerlink" title="Settings文件"></a>Settings文件</h1><p>在Gradle 中，定义了一个设置文件，默认名：settings.gradle，放在根目录下</p>
<p>settings.gradle的主要作用是为了配置子工程。</p>
<p>在Gradle 中， 多工程是通过工程树来表示。就相当于我们在Android 中的 Project 和 Module 一样。根工程（根目录，rootProject）就相当于Android 中的Project。然后，一个根工程有多个子工程，子工程就相当于Android中的Module一样。</p>
<p>一个子工程只有在settings.gradle 文件中配置过，才能被找到，才能在构建的时候被包含进去。</p>
<p>我们可以看一下，在我们Android 工程中的settings.gradle长什么样子：</p>
<p><a href="https://cdn.jsdelivr.net/gh/fanshanhong/note-image/android_setting_gradle.png" data-fancybox="group" data-caption class="fancybox"><img src="https://cdn.jsdelivr.net/gh/fanshanhong/note-image/android_setting_gradle.png" alt title></a></p>
<p>可以看到，最外层的My Application 就是 根工程rootProject。在根工程中有两个子工程，分别是app 和 common。<br>在不明确指定子工程路径的情况下，默认目录就是同级目录。可以看到，我的 app 目录和 common目录都是同 setting.gradle文件同一目录的，所以可以不指定目录了。</p>
<p>如果想要指定目录:<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">project(<span class="string">':app'</span>).projectDir = <span class="keyword">new</span> File()</span><br></pre></td></tr></table></figure></div></p>
<p>project(‘:app’) 是使用project方法，查找名字为app的子工程。  返回值就是 app 子工程对象，然后修改这个子工程的 projectDir 属性值。这样就可以了。</p>
<p>TIP：<br>好像冒号 ：  就表示根工程<br>冒号+xx  就表示子工程</p>
<h1 id="Build文件"><a href="#Build文件" class="headerlink" title="Build文件"></a>Build文件</h1><p>每个 Project 都有一个 build.gradle 文件。</p>
<p>gradle 构建的时候，每一个 build.gradle 脚本文件被 Gradle 加载解析后，都会对应生成一个 Project 对象。所以在 build.gradle 里写的 DSL，其实都是 Project 接口的一些方法，Project 其实是一个接口，真正的实现类是 DefaultProject。后面看Project的类图</p>
<p>RootProject可以获取到所有的ChildProject，因此可以在RootProject中对ChildProject进行统一配置和管理。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">subprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>配置项目中所有的ChildProject的依赖的仓库为jcenter</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>配置项目中所有的Project的依赖的仓库为jcenter，包括RootProject和ChildProject</p>
<p>参考：<a href="https://blog.csdn.net/u013700502/article/details/85231687" target="_blank" rel="noopener">https://blog.csdn.net/u013700502/article/details/85231687</a></p>
<p>subprojects allprojects 其实是两个方法，接受闭包作为参数。这个方法会对工程进行遍历，遍历的过程中会调用我们自定义的闭包，所以，我们可以在闭包里配置、打印或者修改Project属性都可以。</p>
<h1 id="buildscript-和-allprojects"><a href="#buildscript-和-allprojects" class="headerlink" title="buildscript 和 allprojects"></a>buildscript 和 allprojects</h1><p>这里我们要明确这两个配置。</p>
<ol>
<li>buildscript 配置的 是gradle脚本自身需要使用的资源。</li>
<li>build.gradle 文件中直接声明的依赖项、仓库地址等信息是项目自身需要的资源</li>
<li>gradle在执行脚本时，会优先执行buildscript代码块中的内容，然后才会执行剩余的build脚本。</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath <span class="string">'com.android.tools.build:gradle:3.5.2'</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></span><br><span class="line">        <span class="comment">// in the individual module build.gradle files</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>看下我的 buildscript。<code>dependencies</code> 指的是 gradle脚本运行，需要依赖什么插件。<code>repositories</code><br>说的是这个插件去哪里下载。然后在使用的时候，apply plugin 来引用就可以了。</p>
<p>在 allprojects 中的<code>dependencies</code> 以及 我们app的 build.gradle 中的<code>dependencies</code> 说的是项目的依赖项。</p>
<p>比如我代码想要使用一下appcompat 这个库。那就在app下的build.gradle 中的dependencies添加，代表我们需要依赖 appcompat 这个库。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation fileTree(<span class="string">dir:</span> <span class="string">'libs'</span>, <span class="string">include:</span> [<span class="string">'*.jar'</span>])</span><br><span class="line">    implementation <span class="string">'androidx.appcompat:appcompat:1.2.0'</span></span><br><span class="line">    implementation <span class="string">'com.google.android.material:material:1.0.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>然后，这个库去哪里下载呢？就在 <code>repositories</code> 里配置。可以每个ChildProject单独配，也可以直接写在RootProject的<code>repositories</code>中，这样就是告诉gradle，项目需要的依赖，比如 appcompat 库，还有其他乱七八糟的库，都去jcenter下载去吧。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h1 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h1><p>Project和 Task都允许用户添加额外的自定义属性。</p>
<p>看完这个大概就明白了</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 是在project下的</span></span><br><span class="line"><span class="comment">// 定义一个Project的属性</span></span><br><span class="line">ext.age = <span class="number">330</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过代码块，定义多个Project属性</span></span><br><span class="line">ext&#123;</span><br><span class="line">    android = <span class="string">"androidandroidandroid"</span> </span><br><span class="line">&#125;</span><br><span class="line">project.tasks.create(<span class="string">"printVersion"</span>)&#123;</span><br><span class="line"></span><br><span class="line">    doLast &#123;</span><br><span class="line">        <span class="comment">// 访问Project的age属性</span></span><br><span class="line">        println(project.age)</span><br><span class="line">        <span class="comment">// 访问Project的android属性</span></span><br><span class="line">        println(project.android)</span><br><span class="line">        println(project.ext.android)</span><br><span class="line">        println(rootProject.android)</span><br><span class="line">        println(rootProject.ext.android)</span><br><span class="line">        <span class="comment">// 错误，这样写是访问Task的ext。但是我们这个printVersion Task没有android这个属性</span></span><br><span class="line">        <span class="comment">//println(ext.android)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也可以不带 project 直接访问。默认就是project.</span></span><br><span class="line">        println(android)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 这样写，说的是  task的属性，即：Task 有个 eee的属性， 注意：不是project的属性</span></span><br><span class="line">        ext.eee = <span class="string">"22"</span></span><br><span class="line">        println(<span class="string">"$&#123;ext.eee&#125;"</span>)</span><br><span class="line">        <span class="comment">//这样访问，肯定没有这个</span></span><br><span class="line">        <span class="comment">//println("$&#123;project.ext.eee&#125;")</span></span><br><span class="line">        println(<span class="string">"作为task的属性: $&#123;printVersion.eee&#125; "</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 全局project.ext</span></span><br><span class="line">        project.ext.fff = <span class="string">"fffff"</span></span><br><span class="line">        project.fff = <span class="string">"1111"</span>;<span class="comment">// 这样写也可以</span></span><br><span class="line">        println(<span class="string">"$&#123;rootProject.ext.fff&#125;"</span>) <span class="comment">// 有</span></span><br><span class="line">        println(<span class="string">"$&#123;rootProject.fff&#125;"</span>) <span class="comment">// 有</span></span><br><span class="line">        <span class="comment">//println("$&#123;ext.fff&#125;") // 没 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h1 id="Task-与-Project"><a href="#Task-与-Project" class="headerlink" title="Task 与 Project"></a>Task 与 Project</h1><p>RootProject 就相当于一个我们Android 中的Application。<br>一个Application里有好多Module。Module就相当于ChildProject。<br>每个Project都可以包含多个Task。<br>Task就是一个任务，一个操作。</p>
<p>我们创建的Task，都会作为Project的一个属性来管理。属性名就是Task的名称。我们可以来验证一下。<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">task hello &#123;</span><br><span class="line">    doLast &#123;</span><br><span class="line">        println <span class="string">'Hello world!'</span></span><br><span class="line"></span><br><span class="line">        println project.hasProperty(<span class="string">"hello"</span>) <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<h1 id="访问任务的方式"><a href="#访问任务的方式" class="headerlink" title="访问任务的方式"></a>访问任务的方式</h1><ol>
<li>任务名</li>
<li>TaskContianer 是用来管理所有的 Task 实例集合的，可以通过 Project.getTasks() 来获取 TaskContainer 实例。然后，我们可以通过tasks来查找任务</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tasks[<span class="string">'hello'</span>].doLast &#123;</span><br><span class="line">    print <span class="string">"hello"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>访问的时候， 任务名就是key。<br>其实，<code>[]</code>在Groovy中是一个操作符。 <code>a[b]</code>对应的 是 <code>a.getAt(b)</code>这个方法。对应的，我们<code>tasks[&#39;hello&#39;]</code>其实就是调用<code>tasks.get(&#39;hello&#39;)</code>这个方法，查看Gradle源码，可以看到，这个方法是通过<code>tasks.findByName(String  name)</code>来实现的。</p>
<ol start="3">
<li>通过路径访问</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tasks.findByPath(<span class="string">'项目名称:任务名称'</span>)</span><br><span class="line">tasks.getByPath()</span><br></pre></td></tr></table></figure></div>
<p><code>get</code>方法找不到会报错。<code>find</code>找不到返回null</p>
<ol start="4">
<li>通过名称访问</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tasks.findByName()</span><br><span class="line">task.getByName()</span><br></pre></td></tr></table></figure></div>
<p>采用路径的方式，可以传路径，也可以只传入名字。但是通过名字访问，参数只能是名字，不能是路径。</p>
<h1 id="Project类图"><a href="#Project类图" class="headerlink" title="Project类图"></a>Project类图</h1><p>当构建进程启动后，Gradle基于build.gradle中的配置实例化org.gradle.api.Project类，先来看看 Project 类的主要结构(节选部分常用)：</p>
<p><a href="https://cdn.jsdelivr.net/gh/fanshanhong/note-image/project_interface.webp" data-fancybox="group" data-caption class="fancybox"><img src="https://cdn.jsdelivr.net/gh/fanshanhong/note-image/project_interface.webp" alt title></a></p>
<h1 id="getter-setter属性"><a href="#getter-setter属性" class="headerlink" title="getter/setter属性"></a>getter/setter属性</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">File bd = getBuildDir()</span><br><span class="line">println <span class="string">"buildDir = $&#123;bd.getAbsolutePath()&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取Project的名字</span></span><br><span class="line">String name = getName()</span><br><span class="line">println <span class="string">"project name = $name"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设置Project的描述信息</span></span><br><span class="line">setDescription <span class="string">"这是一个测试案例"</span></span><br><span class="line">String desc = getDescription()</span><br><span class="line">println <span class="string">"project description = $desc"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取Project的路径</span></span><br><span class="line">String path = getPath();</span><br><span class="line">println <span class="string">"project path = $path"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VersionInfo</span> &#123;</span></span><br><span class="line">    String version</span><br><span class="line">    <span class="keyword">boolean</span> release</span><br><span class="line"></span><br><span class="line">    VersionInfo(String v, <span class="keyword">boolean</span> release) &#123;</span><br><span class="line">        version = v</span><br><span class="line">        <span class="keyword">this</span>.release = release</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"V-$&#123;version&#125;-$&#123;release ? 'release' : 'debug'&#125;"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//设置Project的版本号，参数可以是任何对象，gradle内部会使用 toString() 方法返回的值</span></span><br><span class="line">setVersion(<span class="keyword">new</span> VersionInfo(<span class="string">"1.0.0"</span>, <span class="literal">true</span>))</span><br><span class="line">println(<span class="string">"project version = $&#123;getVersion()&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置Project的分组</span></span><br><span class="line">setGroup <span class="string">"TestGroup"</span></span><br><span class="line">println(<span class="string">"project group = $&#123;getGroup()&#125;"</span>)</span><br></pre></td></tr></table></figure></div>
<h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><h2 id="通过mkdir创建目录"><a href="#通过mkdir创建目录" class="headerlink" title="通过mkdir创建目录"></a>通过mkdir创建目录</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">File mkDir = mkdir(<span class="string">"$&#123;buildDir&#125;/test"</span>);</span><br><span class="line">File mkDir2 = mkdir(<span class="string">"$&#123;buildDir&#125;/test2"</span>)</span><br><span class="line">println <span class="string">"检测目录是否创建成功：$&#123;mkDir.exists()&#125;, $&#123;mkDir2.exists()&#125;"</span></span><br></pre></td></tr></table></figure></div>
<h2 id="通过file、files-定位文件"><a href="#通过file、files-定位文件" class="headerlink" title="通过file、files 定位文件"></a>通过file、files 定位文件</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定位单个文件，参数可以是相对路径、绝对路径</span></span><br><span class="line">File testDir = file(<span class="string">"$&#123;buildDir&#125;/test"</span>)</span><br><span class="line">println <span class="string">"文件定位是否成功：$&#123;testDir.exists()&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//文件集合，Gradle里用 FileCollection 来表示</span></span><br><span class="line">FileCollection fileCollection = files(<span class="string">"$&#123;buildDir&#125;/test"</span>, <span class="string">"$&#123;buildDir&#125;/test2"</span>)</span><br><span class="line">println <span class="string">"-------对文件集合进行迭代--------"</span></span><br><span class="line">fileCollection.each &#123;File f -&gt;</span><br><span class="line">    println f.name</span><br><span class="line">&#125;</span><br><span class="line">println <span class="string">"-------文件迭代结束-------"</span></span><br><span class="line"><span class="comment">//获取文件列表</span></span><br><span class="line">Set&lt;File&gt; set = fileCollection.getFiles()</span><br><span class="line">println <span class="string">"文件集合里共有$&#123;set.size()&#125;个文件"</span></span><br></pre></td></tr></table></figure></div>
<h2 id="通过fileTree创建文件树"><a href="#通过fileTree创建文件树" class="headerlink" title="通过fileTree创建文件树"></a>通过fileTree创建文件树</h2><p>Gradle里用 ConfigurableFileTree 来表示文件树，文件树会返回某个目录及其子目录下所有的文件，不包含目录。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先在build目录下创建3个txt文件</span></span><br><span class="line">file(<span class="string">"$&#123;buildDir&#125;/t1.txt"</span>).createNewFile()</span><br><span class="line">file(<span class="string">"$&#123;buildDir&#125;/test/t2.txt"</span>).createNewFile()</span><br><span class="line">file(<span class="string">"$&#123;buildDir&#125;/t1.java"</span>).createNewFile()</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.通过一个基准目录创建文件树，参数可以是相对目录，也可以是绝对目录，与file()方法一样</span></span><br><span class="line">println <span class="string">"通过基准目录来创建文件树"</span></span><br><span class="line">ConfigurableFileTree fileTree1 = fileTree(<span class="string">"build"</span>)</span><br><span class="line"><span class="comment">//添加包含规则</span></span><br><span class="line">fileTree1.include <span class="string">"*.txt"</span>, <span class="string">"*/*.txt"</span></span><br><span class="line"><span class="comment">//添加排除规则</span></span><br><span class="line">fileTree1.exclude <span class="string">"*.java"</span></span><br><span class="line">fileTree1.each &#123; f -&gt;</span><br><span class="line">    println f    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.通过闭包来创建文件树</span></span><br><span class="line">println <span class="string">"通过闭包来创建文件树"</span></span><br><span class="line">ConfigurableFileTree fileTree2 = fileTree(<span class="string">"build"</span>) &#123;</span><br><span class="line">    include <span class="string">"*/*.txt"</span>, <span class="string">"*.java"</span></span><br><span class="line">    exclude <span class="string">"*.txt"</span></span><br><span class="line">&#125;</span><br><span class="line">fileTree2.each &#123; f -&gt;</span><br><span class="line">    println f    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.通过map配置来创建文件树，可配置的选项有：dir: ''、include: '[]、exclude: []、includes: []、excludes: []</span></span><br><span class="line">println <span class="string">"通过Map来创建文件树"</span></span><br><span class="line"><span class="keyword">def</span> fileTree3 = fileTree(<span class="string">dir:</span> <span class="string">"build"</span>, <span class="string">includes:</span> [<span class="string">"*/*.txt"</span>, <span class="string">"*.java"</span>])</span><br><span class="line">fileTree3 = fileTree(<span class="string">dir:</span> <span class="string">"build"</span>, <span class="string">exclude:</span> <span class="string">"*.java"</span>)</span><br><span class="line">fileTree3.each &#123; f -&gt;</span><br><span class="line">    println f    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h2><p>复制文件需要使用复制任务（Copy）来进行，它需要指定要复制的源文件和一个目标目录，复制的规则都是定义在 CopySpec 接口里的，更详细的说明可参见 API 文档。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">task testCopyFile(<span class="string">type:</span> Copy) &#123;</span><br><span class="line">    <span class="comment">//复制build目录下的所有文件</span></span><br><span class="line">    from <span class="string">"build"</span></span><br><span class="line">    <span class="comment">//复制单独的某个文件</span></span><br><span class="line">    from <span class="string">"test.java"</span></span><br><span class="line">    <span class="comment">//复制某个文件树下的所有文件</span></span><br><span class="line">    from fileTree(<span class="string">"build"</span>)</span><br><span class="line"></span><br><span class="line">    include <span class="string">"*.txt"</span></span><br><span class="line">    include <span class="string">"*.java"</span></span><br><span class="line">    exclude <span class="string">"t1.txt"</span></span><br><span class="line">    <span class="comment">//指定目标目录</span></span><br><span class="line">    into <span class="string">"outputs"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//对复制的文件重命名：通过闭包来映射</span></span><br><span class="line">    rename &#123; fileName -&gt;</span><br><span class="line">        <span class="comment">//增加 rename_ 前缀</span></span><br><span class="line">        <span class="keyword">return</span> fileName.endsWith(<span class="string">".java"</span>) ? "rename_" + fileName : fileName</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过正则来映射文件名：abctest.java 会映射成 abchjy.java</span></span><br><span class="line">    rename <span class="string">'(.*)test(.*)'</span>, <span class="string">'$1hjy$2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除 build 目录下所有文件</span></span><br><span class="line">delete(<span class="string">"$&#123;buildDir&#125;"</span>)</span><br></pre></td></tr></table></figure></div>
<h1 id="多项目构建"><a href="#多项目构建" class="headerlink" title="多项目构建"></a>多项目构建</h1><p>前面我们介绍的例子，都是单独执行某一个 build.gradle 文件。但是我们在 Android 应用开发中，一个 Project 可以包含若干个 module ，这种就叫做多项目构建。在 Android Studio 项目中，根目录都有一个名叫 settings.gradle 的文件，然后每个 module 的根目录中又有一个 build.gradle 文件，Gradle 就是通过 settings.gradle 来进行多项目构建的。</p>
<h2 id="通过-settings-gradle-引入子项目"><a href="#通过-settings-gradle-引入子项目" class="headerlink" title="通过 settings.gradle 引入子项目"></a>通过 settings.gradle 引入子项目</h2><ol>
<li>先创建如下几个目录及文件：</li>
</ol>
<p>在项目根目录创建一个 settings.gradle，在根目录、app以及library目录下也都创建一个 build.gradle 文件。</p>
<ol start="2">
<li>在 settings.gradle 里引入子项目</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include <span class="string">":app"</span>, <span class="string">":library"</span></span><br></pre></td></tr></table></figure></div>
<ol start="3">
<li>在 build.gradle 里增加测试代码</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在根目录 build.gradle 里增加</span></span><br><span class="line">println <span class="string">"-----root file config-----"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在 app/build.gradle 里增加</span></span><br><span class="line">println <span class="string">"-----app config-----"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在 library/build.gradle 里增加</span></span><br><span class="line">println <span class="string">"-----library config-----"</span></span><br></pre></td></tr></table></figure></div>
<ol start="4">
<li>在项目根目录执行命令 gradle -q，结果如下：</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-----root file config-----</span><br><span class="line">-----app config-----</span><br><span class="line">-----library config-----</span><br></pre></td></tr></table></figure></div>
<p>这是一个多项目构建的简单例子，可以看到结构与我们的 Android 项目是类似的。Gradle 在运行时会读取并解析 settings.gradle 文件，生成一个 Settings对象，然后从中读取并解析子项目的 build.gradle 文件，然后为每个 build.gradle 文件生成一个 Project 对象，进而组装一个多项目构建出来。</p>
<p>Settings 里最核心的API就是 include 方法，通过该方法引入需要构建的子项目。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include​(<span class="string">projectPaths:</span> String...)</span><br></pre></td></tr></table></figure></div>
<p>这里我们为每个 build.gradle 文件生成了一个 Project 对象，跟总共3个 Project，根目录的 Project 我们称之为 root project，子目录的 Project 我们称之为 child project。</p>
<h2 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h2><p>在根项目里可以对子项目进行配置：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过path定位并获取该 Project 对象</span></span><br><span class="line">project(<span class="string">path:</span> String): Project</span><br><span class="line"><span class="comment">//通过path定位一个Project，并进行配置</span></span><br><span class="line">project(<span class="string">path:</span> String, <span class="string">config:</span> Closure): Project</span><br><span class="line"></span><br><span class="line"><span class="comment">//针对所有项目进行配置</span></span><br><span class="line">allprojects(<span class="string">config:</span> Closure)</span><br><span class="line"><span class="comment">//针对所有子项目进行配置</span></span><br><span class="line">subprojects(<span class="string">config:</span> Closure)</span><br></pre></td></tr></table></figure></div>
<p>我们修改根目录 build.gradle 文件如下：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">println <span class="string">"-----root file config-----"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//配置 app 项目</span></span><br><span class="line">project(<span class="string">":app"</span>) &#123;</span><br><span class="line">    ext &#123;</span><br><span class="line">        appParam = <span class="string">"test app"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置所有的项目</span></span><br><span class="line">allprojects &#123;</span><br><span class="line">    ext &#123;</span><br><span class="line">        allParam = <span class="string">"test all project"</span></span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置子项目</span></span><br><span class="line">subprojects &#123;</span><br><span class="line">    ext &#123;</span><br><span class="line">        subParam = <span class="string">"test sub project"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">println <span class="string">"allParam = $&#123;allParam&#125;"</span></span><br></pre></td></tr></table></figure></div>
<p>修改 app/build.gradle 文件如下：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">println <span class="string">"-----app config-----"</span></span><br><span class="line">println <span class="string">"appParam = $&#123;appParam&#125;"</span></span><br><span class="line">println <span class="string">"allParam = $&#123;allParam&#125;"</span></span><br><span class="line">println <span class="string">"subParam = $&#123;subParam&#125;"</span></span><br></pre></td></tr></table></figure></div>
<p>修改 library/build.gradle 文件如下：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">println <span class="string">"-----library config-----"</span></span><br><span class="line">println <span class="string">"allParam = $&#123;allParam&#125;"</span></span><br><span class="line">println <span class="string">"subParam = $&#123;subParam&#125;"</span></span><br></pre></td></tr></table></figure></div>
<p>运行结果如下：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-----root file config-----</span><br><span class="line">allParam = test all project</span><br><span class="line">-----app config-----</span><br><span class="line">appParam = test app</span><br><span class="line">allParam = test all project</span><br><span class="line">subParam = test sub project</span><br><span class="line">-----library config-----</span><br><span class="line">allParam = test all project</span><br><span class="line">subParam = test sub project</span><br></pre></td></tr></table></figure></div>
<h2 id="构建脚本配置"><a href="#构建脚本配置" class="headerlink" title="构建脚本配置"></a>构建脚本配置</h2><ol>
<li><code>buildscript</code></li>
</ol>
<p>配置该 Project 的构建脚本的 classpath，在 Andorid Studio 中的 root project 中可以看到：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath <span class="string">'com.android.tools.build:gradle:3.0.1'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<ol start="2">
<li><code>apply</code></li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply(<span class="string">options:</span> Map&lt;String, ?&gt;)</span><br></pre></td></tr></table></figure></div>
<p>我们通过该方法使用插件或者是其他脚本，options里主要选项有：</p>
<ul>
<li>from： 使用其他脚本，值可以为 Project.uri(Object) 支持的路径</li>
<li>plugin：使用其他插件，值可以为插件id或者是插件的具体实现类<br>例如：</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用插件，com.android.application 就是插件id</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'com.android.application'</span></span><br><span class="line"><span class="comment">//使用插件，MyPluginImpl 就是一个Plugin接口的实现类</span></span><br><span class="line">apply <span class="string">plugin:</span> MyPluginImpl</span><br><span class="line"></span><br><span class="line"><span class="comment">//引用其他gradle脚本，push.gradle就是另外一个gradle脚本文件</span></span><br><span class="line">apply <span class="string">from:</span> <span class="string">'./push.gradle'</span></span><br></pre></td></tr></table></figure></div>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><ol>
<li>Gradle属性</li>
</ol>
<p>在与 build.gradle 文件同级目录下，定义一个名为 gradle.properties 文件，里面定义的键值对，可以在 Project 中直接访问。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//gradle.properties里定义属性值</span></span><br><span class="line">company=<span class="string">"hangzhouheima"</span></span><br><span class="line">username=<span class="string">"hjy"</span></span><br></pre></td></tr></table></figure></div>
<p>在 build.gradle 文件里可以这样直接访问：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">println <span class="string">"company = $&#123;company&#125;"</span></span><br><span class="line">println <span class="string">"username = $&#123;username&#125;"</span></span><br></pre></td></tr></table></figure></div>
<ol start="2">
<li>扩展属性<br>还可以通过 ext 命名空间来定义属性，我们称之为扩展属性。</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">groovy</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">  username = <span class="string">"hjy"</span></span><br><span class="line">  age = <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">println username</span><br><span class="line">println ext.age</span><br><span class="line">println project.username</span><br><span class="line">println project.ext.age</span><br></pre></td></tr></table></figure></div>
<p>必须注意，默认的扩展属性，只能定义在 ext 命名空间下面。对扩展属性的访问方式，以上几种都支持。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Fan shanhong</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2021/01/23/Gradle/4.Project/">http://yoursite.com/2021/01/23/Gradle/4.Project/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Project/">Project    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2021/01/23/Gradle/1.Gradle入门/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Gradle入门</span></div></a></div><div class="next-post pull_right"><a href="/2021/01/23/Gradle/3.Task/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Task</span></div></a></div></nav></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Fan shanhong</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script></body></html>